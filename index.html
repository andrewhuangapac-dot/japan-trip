<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>äº¬é˜ªç¥è¦ªå­éŠ (v46: äº¤é€šè©³è§£ç‰ˆ)</title>
    
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap');
        
        body { 
            font-family: 'Noto Sans TC', sans-serif; 
            background-color: #f1f5f9; 
            -webkit-tap-highlight-color: transparent; 
            overscroll-behavior-y: none; /* é˜²æ­¢ä¸‹æ‹‰åˆ·æ–°å¹²æ“¾é«”é©— */
        }
        
        .app-container { 
            max-width: 430px; 
            margin: 0 auto; 
            background: #f8fafc; 
            min-height: 100vh; 
            position: relative; 
            box-shadow: 0 0 25px rgba(0,0,0,0.15); 
            display: flex; 
            flex-direction: column; 
        }
        
        .scroll-container::-webkit-scrollbar { display: none; }
        .scroll-container { -ms-overflow-style: none; scrollbar-width: none; }
        
        .bg-gradient-brand { background: linear-gradient(135deg, #2563eb 0%, #4f46e5 100%); }

        .timeline-line { position: absolute; left: 57px; top: 35px; bottom: -20px; width: 2px; background: #e2e8f0; z-index: 0; }
        .last-item .timeline-line { display: none; }
        
        #map { height: 100%; width: 100%; min-height: 300px; z-index: 0; background: #e5e5e5; }
        
        .photo-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 6px; margin-top: 10px; }
        .photo-item { aspect-ratio: 1; border-radius: 12px; overflow: hidden; position: relative; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .photo-item img { width: 100%; height: 100%; object-fit: cover; }

        .card-shadow { box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03); }
        
        /* æ¨™ç±¤æ¨£å¼ */
        .badge-alert { background: #fee2e2; color: #ef4444; border: 1px solid #fecaca; font-size: 10px; padding: 2px 6px; border-radius: 4px; display: inline-block; margin-top: 4px; font-weight: bold; }
        
        /* Uber å°ˆå±¬æ¨£å¼ */
        .badge-uber { 
            background: #1f2937; color: #fbbf24; 
            border: 1px solid #000; 
            font-size: 11px; padding: 3px 8px; border-radius: 6px; 
            display: inline-flex; align-items: center; gap: 4px;
            margin-bottom: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>

<div id="app">
    <div v-if="!isAccessGranted" class="fixed inset-0 bg-slate-900 z-50 flex items-center justify-center p-6">
        <div class="bg-white w-full max-w-xs rounded-3xl p-8 text-center shadow-2xl">
            <div class="mb-6 text-5xl animate-bounce">ğŸ”</div>
            <h2 class="text-xl font-bold mb-2 text-slate-800">æ—…ç¨‹é–å®šä¸­</h2>
            <p class="text-gray-400 text-sm mb-8">è«‹è¼¸å…¥é€šè¡Œç¢¼ (Hint: Alfred)</p>
            <input type="password" v-model="passcode" class="w-full text-center text-xl bg-slate-50 border-2 border-slate-100 rounded-xl py-3 mb-6 outline-none focus:border-blue-500 transition" placeholder="Passcode">
            <button @click="checkPasscode" class="w-full bg-gradient-brand text-white py-3.5 rounded-xl font-bold active:scale-95 transition shadow-lg shadow-blue-500/30">é–‹å•Ÿæ—…ç¨‹</button>
        </div>
    </div>

    <div v-else class="app-container">
        <header class="bg-gradient-brand sticky top-0 z-40 pb-2 flex-none shadow-md">
            <div class="px-6 pt-12 pb-4 flex justify-between items-end text-white">
                <div>
                    <div class="text-[10px] font-bold tracking-[0.2em] opacity-80 mb-1">FAMILY TRIP 2025</div>
                    <h1 class="text-2xl font-bold tracking-wide">äº¬é˜ªç¥å®¶æ—ä¹‹æ—… <span class="text-xl">â›©ï¸</span></h1>
                </div>
                <div class="flex gap-3">
                    <button @click="downloadMemories" class="w-9 h-9 rounded-full bg-white/20 backdrop-blur flex items-center justify-center text-white hover:bg-white/30 transition border border-white/10">
                        <i class="fas fa-cloud-download-alt text-sm"></i>
                    </button>
                    <button @click="resetData" class="w-9 h-9 rounded-full bg-white/20 backdrop-blur flex items-center justify-center text-white hover:bg-red-500/50 transition border border-white/10">
                        <i class="fas fa-redo text-sm"></i>
                    </button>
                </div>
            </div>

            <div class="flex overflow-x-auto px-4 pb-3 gap-3 scroll-container snap-x">
                <div v-for="(day, index) in days" :key="index" 
                     @click="changeDay(index)"
                     class="snap-center flex-shrink-0 flex flex-col items-center justify-center w-[70px] h-[82px] rounded-2xl transition-all duration-300 cursor-pointer relative overflow-hidden"
                     :class="currentDay === index ? 'bg-white text-blue-600 shadow-lg translate-y-0.5' : 'bg-white/10 text-white/70 border border-white/10 hover:bg-white/20'">
                    
                    <span class="text-[10px] font-medium opacity-80">{{ day.date }}</span>
                    <span class="text-sm font-bold my-0.5">{{ day.weekday }}</span>
                    
                    <div class="mt-1 flex flex-col items-center">
                        <i :class="[day.weather.icon]" class="text-xs mb-0.5"></i>
                        <span class="text-[10px] font-bold">
                            {{ day.weather.temp_high !== '-' ? day.weather.temp_high + 'Â°' : '--' }}
                        </span>
                    </div>
                </div>
            </div>
        </header>

        <main class="flex-1 overflow-y-auto scroll-container relative"
              @touchstart="handleTouchStart" 
              @touchend="handleTouchEnd">
            
            <div v-if="isLoading" class="absolute inset-0 z-30 bg-white/80 backdrop-blur flex flex-col items-center justify-center">
                <div class="animate-spin text-blue-600 text-3xl mb-3"><i class="fas fa-circle-notch"></i></div>
                <div class="text-sm text-gray-500 font-medium">{{ loadingText }}</div>
                <div v-if="progress > 0" class="w-32 h-1 bg-gray-200 rounded-full mt-3 overflow-hidden">
                    <div class="h-full bg-blue-500 transition-all duration-300" :style="{width: progress + '%'}"></div>
                </div>
            </div>

            <div v-if="currentView === 'list'" class="px-5 py-6 pb-28">
                <div v-if="sortedActivities.length === 0" class="text-center py-20">
                    <div class="text-6xl mb-4 opacity-20">ğŸ“</div>
                    <p class="text-gray-400">æœ¬æ—¥å°šç„¡è¡Œç¨‹</p>
                    <button @click="openModal()" class="mt-6 text-blue-600 text-sm font-bold bg-blue-50 px-6 py-2 rounded-full">ç«‹å³æ–°å¢</button>
                </div>

                <div v-for="(item, idx) in sortedActivities" :key="item.id" 
                     class="relative pl-[72px] pb-8 group" 
                     :class="{'last-item': idx === sortedActivities.length - 1}">
                    
                    <div class="timeline-line"></div>
                    
                    <div class="absolute left-0 top-1 w-[48px] text-xs font-bold text-gray-400 text-right font-mono">{{ item.time }}</div>
                    
                    <div class="absolute left-[52px] top-1.5 w-3 h-3 rounded-full border-2 border-slate-50 shadow-sm z-10"
                         :class="getIconColor(item)"></div>

                    <div @click="openModal(item)" class="bg-white rounded-2xl p-4 card-shadow border border-slate-100 active:scale-[0.99] transition-transform duration-200">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="font-bold text-slate-800 text-lg leading-tight">{{ getMainName(item.location) }}</h3>
                            <div class="flex gap-2">
                                <a v-if="item.coords" :href="generateGoogleLink(item.location, item.location, item.transport_mode)" target="_blank" @click.stop class="w-8 h-8 rounded-full bg-slate-50 text-blue-500 flex items-center justify-center text-xs hover:bg-blue-50 transition border border-slate-100 shadow-sm">
                                    <i class="fas fa-location-arrow"></i>
                                </a>
                            </div>
                        </div>
                        
                        <p v-if="getSubName(item.location)" class="text-xs text-gray-400 mb-2.5 font-medium">{{ getSubName(item.location) }}</p>
                        
                        <div v-if="item.isUber" class="badge-uber">
                            <i class="fas fa-taxi"></i> å»ºè­°æ­ä¹˜ Uber / è¨ˆç¨‹è»Š
                        </div>

                        <div class="inline-flex items-center px-3 py-1 rounded-lg text-xs font-bold mb-3 tracking-wide"
                             :class="getTagStyle(item)">
                            <i class="mr-1.5" :class="getTagIcon(item)"></i>
                            {{ item.action }}
                        </div>
                        
                        <div v-if="item.alert" class="block">
                            <span class="badge-alert"><i class="fas fa-exclamation-circle mr-1"></i>{{ item.alert }}</span>
                        </div>

                        <div v-if="item.foodOptions && item.foodOptions.length > 0" class="mt-3 mb-2 bg-orange-50/60 rounded-xl p-3 border border-orange-100" @click.stop>
                            <div class="px-1 mb-2 flex items-center gap-1.5 text-xs font-bold text-orange-600">
                                <i class="fas fa-utensils"></i> é™„è¿‘ç¾é£Ÿ (3é¸1)
                            </div>
                            <div class="flex flex-col gap-2">
                                <div v-for="(food, fIdx) in item.foodOptions" :key="fIdx" 
                                     class="bg-white p-2.5 rounded-lg border border-orange-100 shadow-sm flex justify-between items-center">
                                     <div class="flex-1 min-w-0 mr-3">
                                        <div class="font-bold text-slate-700 text-sm mb-0.5 truncate">{{ food.name }}</div>
                                        <div class="text-[11px] text-gray-400 leading-tight">{{ food.desc }}</div>
                                     </div>
                                     <a :href="generateGoogleLink(food.query, food.name, 'walking')" target="_blank" 
                                        class="shrink-0 w-7 h-7 flex items-center justify-center bg-orange-50 text-orange-500 rounded-full text-xs active:scale-95 transition">
                                        <i class="fas fa-location-arrow"></i>
                                     </a>
                                </div>
                            </div>
                        </div>

                        <div v-if="item.shopOptions && item.shopOptions.length > 0" class="mt-2 mb-2 bg-pink-50/60 rounded-xl p-3 border border-pink-100" @click.stop>
                            <div class="px-1 mb-2 flex items-center gap-1.5 text-xs font-bold text-pink-600">
                                <i class="fas fa-shopping-bag"></i> è³¼ç‰©æƒè²¨ (Donki/è—¥å¦)
                            </div>
                            <div class="flex flex-col gap-2">
                                <div v-for="(shop, sIdx) in item.shopOptions" :key="sIdx" 
                                     class="bg-white p-2.5 rounded-lg border border-pink-100 shadow-sm flex justify-between items-center">
                                     <div class="flex-1 min-w-0 mr-3">
                                        <div class="font-bold text-slate-700 text-sm mb-0.5 truncate">{{ shop.name }}</div>
                                        <div class="text-[11px] text-gray-400 leading-tight">{{ shop.desc }}</div>
                                     </div>
                                     <a :href="generateGoogleLink(shop.query, shop.name, 'walking')" target="_blank" 
                                        class="shrink-0 w-7 h-7 flex items-center justify-center bg-pink-50 text-pink-500 rounded-full text-xs active:scale-95 transition">
                                        <i class="fas fa-location-arrow"></i>
                                     </a>
                                </div>
                            </div>
                        </div>

                        <div v-if="item.images && item.images.length">
                            <div class="photo-grid">
                                <div v-for="(img, imgIdx) in item.images" :key="imgIdx" class="photo-item bg-gray-100" @click.stop="viewImage(img.url)">
                                    <img :src="img.url" loading="lazy">
                                    <button @click.stop="deleteSingleImage(item, imgIdx)" class="absolute top-1 right-1 bg-black/40 backdrop-blur text-white w-5 h-5 rounded-full flex items-center justify-center text-[10px]">âœ•</button>
                                </div>
                            </div>
                        </div>
                            
                        <label class="mt-3 flex items-center gap-2 text-xs text-gray-400 py-2 cursor-pointer hover:text-blue-600 transition w-fit" @click.stop>
                            <div class="w-6 h-6 rounded-full bg-slate-100 flex items-center justify-center"><i class="fas fa-camera"></i></div>
                            <span class="font-medium">æ–°å¢ç…§ç‰‡</span>
                            <input type="file" multiple accept="image/*" class="hidden" @change="uploadImages($event, item)">
                        </label>
                    </div>
                </div>
            </div>

            <div v-show="currentView === 'map'" class="h-full w-full relative">
                <div id="map"></div>
                <div class="absolute bottom-28 right-4 z-[400] flex flex-col gap-3">
                    <button @click="toggleMapMode" class="w-12 h-12 bg-white rounded-full shadow-xl text-slate-700 flex items-center justify-center font-bold text-xs border border-gray-100 active:scale-95 transition">
                        {{ showAllMap ? 'å…¨éƒ¨' : 'ç•¶å¤©' }}
                    </button>
                </div>
            </div>
        </main>

        <nav class="fixed bottom-0 left-0 right-0 bg-white/90 backdrop-blur-md border-t border-slate-100 px-6 py-3 flex justify-around items-center z-50 max-w-[430px] mx-auto pb-safe shadow-[0_-5px_15px_rgba(0,0,0,0.02)]">
            <button @click="changeDay(currentDay)" class="flex flex-col items-center gap-1 transition" :class="currentView === 'list' ? 'text-blue-600' : 'text-gray-300'">
                <i class="fas fa-list-ul text-xl"></i>
                <span class="text-[10px] font-bold">è¡Œç¨‹</span>
            </button>
            
            <button @click="openModal()" class="w-14 h-14 bg-gradient-brand rounded-full shadow-lg shadow-blue-500/40 flex items-center justify-center text-white text-2xl -mt-10 border-4 border-white active:scale-95 transition hover:shadow-blue-500/60">
                <i class="fas fa-plus"></i>
            </button>
            
            <button @click="switchMap" class="flex flex-col items-center gap-1 transition" :class="currentView === 'map' ? 'text-blue-600' : 'text-gray-300'">
                <i class="fas fa-map-marked-alt text-xl"></i>
                <span class="text-[10px] font-bold">åœ°åœ–</span>
            </button>
        </nav>

        <div v-if="showModal" class="fixed inset-0 z-[60] flex items-end sm:items-center justify-center sm:p-4">
            <div class="absolute inset-0 bg-slate-900/60 backdrop-blur-sm transition-opacity" @click="showModal = false"></div>
            <div class="bg-white w-full sm:max-w-sm sm:rounded-3xl rounded-t-3xl p-6 relative z-10 animate-slide-up shadow-2xl">
                <div class="w-12 h-1.5 bg-gray-200 rounded-full mx-auto mb-6"></div>
                <h3 class="text-lg font-bold mb-6 text-slate-800 flex items-center gap-2">
                    <i class="fas fa-edit text-blue-500"></i>
                    {{ isEditing ? 'ç·¨è¼¯è¡Œç¨‹' : 'æ–°å¢è¡Œç¨‹' }}
                </h3>
                
                <div class="space-y-4">
                    <div class="grid grid-cols-3 gap-3">
                        <div class="col-span-1">
                            <label class="text-xs text-gray-500 font-bold ml-1 mb-1.5 block">æ™‚é–“</label>
                            <input type="time" v-model="form.time" class="w-full bg-slate-50 border border-slate-200 rounded-xl px-3 py-3.5 text-sm font-bold focus:ring-2 focus:ring-blue-500 focus:bg-white outline-none transition">
                        </div>
                        <div class="col-span-2">
                            <label class="text-xs text-gray-500 font-bold ml-1 mb-1.5 block">åœ°é»åç¨±</label>
                            <input type="text" v-model="form.location" placeholder="ä¾‹å¦‚: æ¸…æ°´å¯º" class="w-full bg-slate-50 border border-slate-200 rounded-xl px-3 py-3.5 text-sm focus:ring-2 focus:ring-blue-500 focus:bg-white outline-none transition">
                        </div>
                    </div>
                    <div>
                        <label class="text-xs text-gray-500 font-bold ml-1 mb-1.5 block">æ´»å‹•å…§å®¹ / å‚™è¨»</label>
                        <input type="text" v-model="form.action" placeholder="ä¾‹å¦‚: ç©¿å’Œæœæ‹ç…§" class="w-full bg-slate-50 border border-slate-200 rounded-xl px-3 py-3.5 text-sm focus:ring-2 focus:ring-blue-500 focus:bg-white outline-none transition">
                    </div>
                    
                    <div class="flex items-center mt-2">
                         <input type="checkbox" id="uberCheck" v-model="form.isUber" class="w-4 h-4 text-blue-600 rounded">
                         <label for="uberCheck" class="ml-2 text-sm text-gray-700 font-bold">æ¨™ç¤ºç‚º Uber è¡Œç¨‹</label>
                    </div>

                    <div class="flex gap-3 pt-4">
                        <button v-if="isEditing" @click="deleteActivity" class="flex-1 bg-red-50 text-red-500 py-3.5 rounded-xl font-bold text-sm hover:bg-red-100 transition">åˆªé™¤</button>
                        <button @click="saveActivity" class="flex-[2] bg-gradient-brand text-white py-3.5 rounded-xl font-bold text-sm shadow-lg shadow-blue-500/30 active:scale-95 transition">å„²å­˜è®Šæ›´</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyByeBl_M9-TjF2i-5D71AjVm5j-vNCbAUc",
        authDomain: "jp-travel-ef684.firebaseapp.com",
        databaseURL: "https://jp-travel-ef684-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "jp-travel-ef684",
        storageBucket: "jp-travel-ef684.firebasestorage.app",
        messagingSenderId: "14551021580",
        appId: "1:14551021580:web:586459078e20ac09175629"
    };

    if (!firebase.apps.length) {
        firebase.initializeApp(firebaseConfig);
    }
    const db = firebase.database();
    const storage = firebase.storage();

    const { createApp } = Vue;

    // v46: æ¢å¾©å·¦å³æ»‘å‹• + ç¥æˆ¶äº¤é€šè©³ç´° + Day5 8:00å‡ºç™¼
    const masterDataVFinal = {
       0: [
           { id: 101, time: '15:30', location: 'é—œè¥¿æ©Ÿå ´ T2', action: 'é™è½', transport_mode: 'transit', coords: [34.4357, 135.2443], alert: 'éœ€æ­æ¥é§è»Šè‡³ T1' },
           { id: 102, time: '17:35', location: 'é—œè¥¿æ©Ÿå ´ç«™ (T1)', action: 'æ­ä¹˜ Rapi:t', transport_mode: 'transit', coords: [34.4367, 135.2435] },
           { id: 103, time: '18:15', location: 'å—æµ·é›£æ³¢ç«™', action: 'æŠµé”å¤§é˜ª', transport_mode: 'walking', coords: [34.6631, 135.5023] },
           { id: 104, time: '18:30', location: 'Caption by Hyatt Namba', action: 'å‰å¾€é£¯åº— Check-in', isUber: true, isHotel: true, transport_mode: 'driving', coords: [34.6655, 135.5065] },
           { id: 105, time: '19:00', location: 'é“é “å € (Dotonbori)', action: 'æ™šé¤', transport_mode: 'walking', coords: [34.6687, 135.5013], 
             foodOptions: [
                 {name:'ä¸€è˜­æ‹‰éºµ é“é “å €', desc:'24hr ç¶“å…¸è±šéª¨ï¼Œç¨ç«‹éš”é–“', query:'Ichiran Dotonbori', coords:[34.6698, 135.5025]}, 
                 {name:'åƒæˆ¿å¤§é˜ªç‡’', desc:'é“åœ°å¤§é˜ªç‡’ï¼Œå£æ„Ÿé¬†è»Ÿ', query:'Chibo Dotonbori', coords:[34.6685, 135.5032]}, 
                 {name:'ä¸²ç‚¸é”äºº (Kushikatsu Daruma)', desc:'å¤§é˜ªåç‰©ç‚¸ä¸²ï¼Œç¦æ­¢æ²¾å…©æ¬¡é†¬', query:'Kushikatsu Daruma Dotonbori', coords:[34.6690, 135.5035]}
             ]
           },
           { id: 106, time: '20:30', location: 'é“é “å €è³¼ç‰©å€', action: 'è³¼ç‰©æƒè²¨', isShop: true, transport_mode: 'walking', coords: [34.6690, 135.5020],
             shopOptions: [
                 {name:'å”å‰è¨¶å¾· é“é “å €åº—', desc:'æ‘©å¤©è¼ªä¸‹é‚£é–“ï¼Œæ±è¥¿æœ€å…¨', query:'Don Quijote Dotonbori', coords:[34.6695, 135.5030]},
                 {name:'å¤§åœ‹è—¥å¦ (æ¿€å®‰åº—)', desc:'åƒ¹æ ¼æ¥µå…·ç«¶çˆ­åŠ›ï¼Œå¯é€€ç¨…', query:'Daikoku Drug Ultra Shift', coords:[34.6680, 135.5020]}
             ]
           }
       ],
       1: [
           { id: 201, time: '09:00', location: 'é›£æ³¢å…«é˜ªç¥ç¤¾', action: 'å·¨å¤§ç…å­é ­ï¼Œå¿…æ‹ï¼', recommend: true, transport_mode: 'walking', coords: [34.6613, 135.4965] },
           { id: 202, time: '10:00', location: 'å¤§é˜ªé›£æ³¢ç«™ (é˜ªç¥é›»è»Š)', action: 'æ­ä¹˜ã€Œå¿«é€Ÿæ€¥è¡Œã€å¾€ç¥æˆ¶ä¸‰å®® (ç´„45åˆ†ï¼Œå…è½‰è»Š)', transport_mode: 'transit', coords: [34.6672, 135.5065], alert: 'è«‹èªæ˜ã€Œå¿«é€Ÿæ€¥è¡Œã€ (Rapid Exp.) ç´…è‰²å­—æ¨£' },
           { id: 203, time: '11:00', location: 'ç¥æˆ¶ä¸‰å®®ç«™', action: 'æŠµé”/æº–å‚™åˆé¤', transport_mode: 'walking', coords: [34.6930, 135.1915], 
             foodOptions: [
                 {name:'Steakland ç¥æˆ¶é¤¨', desc:'é«˜CPå€¼éµæ¿ç‡’ï¼Œè§€å…‰å®¢é¦–é¸', query:'Steakland Kobe-kan', coords:[34.6929, 135.1917]},
                 {name:'Moriya (ãƒ¢ãƒ¼ãƒªãƒ¤)', desc:'å¿—ç²å§å§æ¨è–¦ï¼Œé ‚ç´šç¥æˆ¶ç‰›', query:'Mouriya Sannomiya', coords:[34.6925, 135.1910]},
                 {name:'çŸ³ç”°å±‹ (Ishida)', desc:'ç²¾ç·»ç‡’è‚‰é¢¨æ ¼ï¼Œè‚‰è³ªæ¥µä½³', query:'Kobe Beef Ishida', coords:[34.6935, 135.1920]}
             ] 
           },
           { id: 204, time: '13:30', location: 'ç¥æˆ¶ Mosaic å»£å ´', action: 'å‰å¾€æ¸¯å€ (å»ºè­° Uber)', isUber: true, transport_mode: 'driving', coords: [34.6795, 135.1843] },
           { id: 205, time: '14:00', location: 'Mosaic 3F', action: 'å­©å­å¤©å ‚ (éºµåŒ…è¶…äºº/æ‰­è›‹)', isGame: true, transport_mode: 'walking', coords: [34.6795, 135.1843] },
           { id: 206, time: '17:30', location: 'ç¥æˆ¶æ¸¯å¡”', action: 'å¤œæ™¯/æ•£æ­¥', transport_mode: 'walking', coords: [34.6815, 135.1765] },
           { id: 207, time: '18:30', location: 'ç¥æˆ¶ä¸‰å®®ç«™ (é˜ªç¥é›»è»Š)', action: 'æ­ä¹˜ã€Œå¿«é€Ÿæ€¥è¡Œã€è¿”å›é›£æ³¢ (é¦–ç«™æœ‰ä½å­)', transport_mode: 'transit', coords: [34.6930, 135.1915] },
           { id: 208, time: '19:30', location: 'å¤§é˜ªé›£æ³¢', action: 'æ™šé¤ (åƒæ—¥å‰)', transport_mode: 'walking', coords: [34.6672, 135.5065],
             foodOptions: [
                 {name:'é³¥è²´æ— é›£æ³¢', desc:'å‡ä¸€åƒ¹ä¸²ç‡’å±…é…’å±‹ï¼Œä¾¿å®œå¥½åƒ', query:'Torikizoku Namba', coords:[34.6675, 135.5055]},
                 {name:'å¤©æ”¿çƒé¾éºµ', desc:'å¿«é€Ÿä¾¿å®œï¼Œæ¹¯é ­é®®ç”œ', query:'Tenmasa Udon Namba', coords:[34.6660, 135.5045]},
                 {name:'ç‡’è‚‰åŠ›ä¸¸', desc:'ç‡’è‚‰åƒåˆ°é£½ï¼Œå¤§å­©å­æœ€æ„›', query:'Yakiniku Rikimaru Namba', coords:[34.6650, 135.5030]}
             ]
           },
           { id: 209, time: '20:30', location: 'åƒæ—¥å‰å•†åº—è¡—', action: 'è£œè²¨', isShop: true, transport_mode: 'walking', coords: [34.6660, 135.5040],
             shopOptions: [
                {name:'å”å‰è¨¶å¾· é›£æ³¢åº—', desc:'åƒæ—¥å‰åº—ï¼Œæ¯”é“é “å €äººå°‘ä¸€é»', query:'Don Quijote Namba Sennichimae', coords:[34.6655, 135.5035]},
                {name:'Sundrug è—¥å¦', desc:'ç‡Ÿæ¥­åˆ°è¼ƒæ™šï¼Œç‰¹åƒ¹å“å¤š', query:'Sundrug Namba', coords:[34.6665, 135.5045]}
             ]
           }
       ],
       2: [
           { id: 301, time: '09:30', location: 'é»‘é–€å¸‚å ´', action: 'åƒæµ·é®®æ—©é¤', transport_mode: 'walking', coords: [34.6654, 135.5065] },
           { id: 302, time: '11:00', location: 'æ·€å±‹æ©‹ç«™', action: 'ç§»å‹• (è¡Œæå¤šå»ºè­°ç›´æ¥ Uber è‡³è»Šç«™)', isUber: true, transport_mode: 'driving', coords: [34.6930, 135.5015] },
           { id: 303, time: '12:30', location: 'Hyatt Place Kyoto', action: 'Check-in (è»Šç«™è‡³é£¯åº—è‹¥ç´¯å¯ Uber)', isUber: true, isHotel: true, transport_mode: 'driving', coords: [35.0163, 135.7592] },
           { id: 304, time: '13:30', location: 'éŒ¦å¸‚å ´', action: 'åˆé¤ (äººå¤šè«‹æ³¨æ„å®‰å…¨)', transport_mode: 'driving', coords: [35.0050, 135.7630],
             foodOptions: [
                 {name:'åä»£è±¬æ’ ä¸‰æ¢æœ¬åº—', desc:'åº§ä½å¯¬æ•ï¼Œç™½é£¯å‘³å™Œæ¹¯åƒåˆ°é£½', query:'Katsukura Sanjo', coords:[35.0088, 135.7665]},
                 {name:'ä¸€é¢¨å ‚ éŒ¦å°è·¯', desc:'è±šéª¨æ‹‰éºµï¼Œä¸è¾£é©åˆå°å­©', query:'Ippudo Nishiki-Koji', coords:[35.0042, 135.7625]},
                 {name:'éŒ¦ Warai (ã‚ã‚‰ã„)', desc:'äº¬é¢¨å¤§é˜ªç‡’ï¼Œç‚’éºµä¹Ÿå¥½åƒ', query:'Nishiki Warai', coords:[35.0045, 135.7615]}
             ]
           },
           { id: 305, time: '15:30', location: 'Nintendo Kyoto', action: 'ä»»å¤©å ‚æ——è‰¦åº— (éœ€æ•´ç†åˆ¸)', isGame: true, transport_mode: 'walking', coords: [35.0038, 135.7695] },
           { id: 306, time: '18:00', location: 'å››æ¢æ²³åŸç”º', action: 'æ™šé¤', transport_mode: 'walking', coords: [35.0040, 135.7690],
             foodOptions: [
                 {name:'æ­¦è—å£½å¸ (Musashi)', desc:'æ²³åŸç”ºäººæ°£è¿´è½‰å£½å¸ï¼Œè€å­—è™Ÿ', query:'Sushi no Musashi Sanjo', coords:[35.0090, 135.7695]},
                 {name:'ç¥‡åœ’ Tanto', desc:'éµæ¿ç‡’/å¤§é˜ªç‡’ï¼Œå°±åœ¨é‹æ²³æ—', query:'Gion Tanto', coords:[35.0055, 135.7735]},
                 {name:'Chao Chao é¤ƒå­', desc:'ä¸€å£é¤ƒå­ï¼Œçš®è–„é…¥è„†', query:'Chao Chao Sanjo Kiyamachi', coords:[35.0080, 135.7710]}
             ]
           },
           { id: 307, time: '19:30', location: 'æ²³åŸç”ºè³¼ç‰©å€', action: 'å¤§å‹æ¡è³¼', isShop: true, transport_mode: 'walking', coords: [35.0050, 135.7700],
             shopOptions: [
                 {name:'å”å‰è¨¶å¾· æ²³åŸç”ºåº—', desc:'äº¬éƒ½æœ€å¤§é–“ï¼Œæ•´æ£Ÿè¶…å¥½é€›', query:'Don Quijote Kawaramachi', coords:[35.0050, 135.7700]},
                 {name:'æ¾æœ¬æ¸… (äº¬éƒ½å››æ¢)', desc:'è—¥å¦å“é …é½Šå…¨', query:'Matsumoto Kiyoshi Kyoto Shijo', coords:[35.0035, 135.7695]}
             ]
           }
       ],
       3: [
           { id: 401, time: '08:30', location: 'ä¼è¦‹ç¨»è·å¤§ç¤¾', action: 'åƒæœ¬é³¥å±…', recommend: true, transport_mode: 'driving', coords: [34.9671, 135.7726] },
           { id: 402, time: '10:30', location: 'æ¸…æ°´å¯º', action: 'ç§»å‹•è‡³æ¸…æ°´å¯º (å¼·çƒˆå»ºè­° Uber)', isUber: true, recommend: true, transport_mode: 'driving', coords: [34.9949, 135.7850], alert: 'æ­¤æ®µè·¯ç¨‹è‹¥è½‰è»Šå¾ˆéº»ç…©ï¼Œç›´æ¥æ­è»Šæœ€å¿«' },
           { id: 403, time: '12:00', location: 'æ¸…æ°´é“', action: 'åˆé¤', transport_mode: 'walking', coords: [34.9960, 135.7830],
             foodOptions: [
                 {name:'Omen çƒé¾éºµ', desc:'ååº—ï¼Œè”¬èœçƒé¾éºµå°å­©æ„›åƒ', query:'Omen Kodaiji', coords:[34.9990, 135.7800]},
                 {name:'å¥§ä¸¹ (Okutan)', desc:'æ¹¯è±†è…è€åº—ï¼Œç’°å¢ƒå„ªç¾', query:'Okutan Kiyomizu', coords:[34.9965, 135.7835]},
                 {name:'æ—¥å‡ºçƒé¾éºµ (Hinode)', desc:'å’–å“©çƒé¾éºµæœ€æœ‰å(éœ€æ’éšŠ)', query:'Hinode Udon', coords:[35.0150, 135.7950]}
             ]
           },
           { id: 404, time: '14:30', location: 'ä¸‰å¹´å‚/äºŒå¹´å‚', action: 'æ•£æ­¥å¾€ç¥‡åœ’æ–¹å‘', isGame: true, transport_mode: 'walking', coords: [35.0035, 135.7780] },
           { id: 405, time: '17:00', location: 'å…«å‚ç¥ç¤¾ / ç¥‡åœ’', action: 'å‚æ™šæ•£æ­¥ï¼Œæ°£æ°›æ¥µä½³', recommend: true, transport_mode: 'walking', coords: [35.0036, 135.7785] },
           { id: 406, time: '18:30', location: 'å…ˆæ–—ç”º (Pontocho)', action: 'æ™šé¤ (æ¯”å»äº¬éƒ½ç«™é †è·¯ä¸”æœ‰æ°£æ°›)', transport_mode: 'walking', coords: [35.0055, 135.7710],
             foodOptions: [
                 {name:'æŸšå­å…ƒ (Yuzugen)', desc:'çŸ¥åæŸšå­é‹ï¼Œéœ€é ç´„', query:'Yuzugen Pontocho', coords:[35.0050, 135.7715]},
                 {name:'Katsukura (åä»£è±¬æ’)', desc:'ä¸‰æ¢æœ¬åº—å°±åœ¨é™„è¿‘', query:'Katsukura Sanjo', coords:[35.0088, 135.7665]},
                 {name:'ç‰›ç‚¸ (Gyukatsu)', desc:'äº¬éƒ½å‹ç‰›ï¼Œç‚¸ç‰›æ’', query:'Kyoto Katsugyu Pontocho', coords:[35.0060, 135.7710]}
             ]
           },
           { id: 407, time: '20:30', location: 'Hyatt Place Kyoto', action: 'æ­ Uber å›é£¯åº— (ç´„ 1000 å††)', isUber: true, transport_mode: 'driving', coords: [35.0163, 135.7592] }
       ],
       4: [
           { id: 501, time: '08:00', location: 'Hyatt Place Kyoto', action: 'æ­ Uber å‰å¾€äº¬éƒ½ç«™å…«æ¢å£ (Haruka æ­è»Šè™•)', isUber: true, recommend: true, transport_mode: 'driving', coords: [35.0163, 135.7592] },
           { id: 502, time: '08:45', location: 'äº¬éƒ½ç«™ (Haruka 30è™Ÿæœˆå°)', action: 'åˆ—è»Šç™¼è»Š (å¾€é—œè¥¿æ©Ÿå ´)', transport_mode: 'transit', coords: [34.9850, 135.7580] },
           { id: 503, time: '10:15', location: 'é—œè¥¿æ©Ÿå ´ T1', action: 'ç™»æ©Ÿ/å…ç¨…åº— (è‹¥æ­å»‰èˆªéœ€å†è½‰ T2)', transport_mode: 'walking', coords: [34.4357, 135.2443],
             foodOptions: [
                 {name:'ç¥åº§æ‹‰éºµ æ©Ÿå ´åº—', desc:'T1 3Fï¼Œå¤§é‡ç™½èœæ¹¯é ­', query:'Kamukura Kansai Airport', coords:[34.4350, 135.2440]},
                 {name:'Sukiya æ©Ÿå ´åº—', desc:'T1 2Fï¼Œå¿«é€Ÿè§£æ±º', query:'Sukiya Kansai Airport', coords:[34.4355, 135.2445]},
                 {name:'551è“¬èŠ', desc:'T1 2F å¿…è²·è±¬è‚‰åŒ…(å¯å¤–å¸¶)', query:'551 Horai Kansai Airport', coords:[34.4360, 135.2450]}
             ],
             shopOptions: [
                 {name:'Cocokara Fine è—¥å¦', desc:'T1 3F æœ€å¾Œè£œè²¨æ©Ÿæœƒ', query:'Cocokara Fine Kansai Airport', coords:[34.4355, 135.2445]},
                 {name:'Pokemon Store', desc:'T1 2F å­©å­æœ€å¾Œä¸€ç«™', query:'Pokemon Store Kansai Airport', coords:[34.4357, 135.2443]}
             ]
           }
       ]
    };

    const app = createApp({
        data() {
            return {
                isAccessGranted: false,
                passcode: '',
                correctPasscode: 'alfredyiting',

                currentDay: 0,
                currentView: 'list',
                showModal: false,
                isEditing: false,
                showAllMap: true, 
                mapInstance: null,
                markerGroup: null,
                isLoading: false, loadingText: 'è®€å–ä¸­...', progress: 0,
                
                // Touch handling variables
                touchStartX: 0,
                touchEndX: 0,
                
                days: [
                    { date: '12/05', weekday: 'é€±äº”', name: 'Day 1: å¤§é˜ª', locCoords: {lat: 34.6937, lon: 135.5023}, weather: { icon: 'fas fa-spinner fa-spin', temp_high: '-' } },
                    { date: '12/06', weekday: 'é€±å…­', name: 'Day 2: ç¥æˆ¶', locCoords: {lat: 34.6901, lon: 135.1955}, weather: { icon: 'fas fa-spinner fa-spin', temp_high: '-' } },
                    { date: '12/07', weekday: 'é€±æ—¥', name: 'Day 3: äº¬éƒ½', locCoords: {lat: 35.0116, lon: 135.7681}, weather: { icon: 'fas fa-spinner fa-spin', temp_high: '-' } },
                    { date: '12/08', weekday: 'é€±ä¸€', name: 'Day 4: äº¬éƒ½', locCoords: {lat: 35.0116, lon: 135.7681}, weather: { icon: 'fas fa-spinner fa-spin', temp_high: '-' } },
                    { date: '12/09', weekday: 'é€±äºŒ', name: 'Day 5: è¿”ç¨‹', locCoords: {lat: 34.4320, lon: 135.2304}, weather: { icon: 'fas fa-spinner fa-spin', temp_high: '-' } }
                ],
                activities: {},
                form: { id: null, time: '', location: '', action: '', coords: [], images: [], foodOptions: [], shopOptions: [], isUber: false }
            }
        },
        computed: {
            currentActivities() { return this.activities[this.currentDay] || []; },
            sortedActivities() { return [...this.currentActivities].sort((a, b) => a.time.localeCompare(b.time)); }
        },
        mounted() { 
            this.loadAndMergeData(); 
            this.fetchRealTimeWeather();
            if(localStorage.getItem('trip_unlocked') === 'true') this.isAccessGranted = true;
        },
        methods: {
            getMainName(str) { return str ? str.split('(')[0] : ''; },
            getSubName(str) { 
                if(!str) return '';
                const match = str.match(/\(([^)]+)\)/);
                return match ? match[1] : '';
            },
            getIconColor(item) {
                if (item.isShop) return 'bg-pink-500 ring-2 ring-pink-200';
                if (item.isHotel) return 'bg-indigo-500 ring-2 ring-indigo-200';
                if (item.isGame) return 'bg-orange-500 ring-2 ring-orange-200';
                if (item.recommend) return 'bg-slate-800 ring-2 ring-slate-300';
                return 'bg-blue-500 ring-2 ring-blue-200';
            },
            getTagStyle(item) {
                if (item.isShop) return 'bg-pink-50 text-pink-600 border border-pink-100';
                if (item.isHotel) return 'bg-indigo-50 text-indigo-600 border border-indigo-100';
                if (item.isGame) return 'bg-orange-50 text-orange-600 border border-orange-100';
                return 'bg-blue-50 text-blue-600 border border-blue-100';
            },
            getTagIcon(item) {
                if (item.isShop) return 'fas fa-shopping-bag';
                if (item.isHotel) return 'fas fa-bed';
                if (item.isGame) return 'fas fa-gamepad';
                return 'fas fa-walking';
            },
            async fetchRealTimeWeather() {
                const year = new Date().getFullYear(); 
                this.days.forEach(async (day, index) => {
                    const [m, d] = day.date.split('/');
                    const apiDate = `${year}-${m}-${d}`;
                    try {
                        const res = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${day.locCoords.lat}&longitude=${day.locCoords.lon}&daily=weathercode,temperature_2m_max&timezone=Asia%2FTokyo&start_date=${apiDate}&end_date=${apiDate}`);
                        const data = await res.json();
                        if (data.daily) {
                            const code = data.daily.weathercode[0];
                            this.days[index].weather = { 
                                icon: this.getWeatherIcon(code), 
                                temp_high: Math.round(data.daily.temperature_2m_max[0])
                            };
                        }
                    } catch (err) {}
                });
            },
            getWeatherIcon(code) {
                if (code === 0) return 'fas fa-sun text-yellow-400';
                if ([1, 2, 3].includes(code)) return 'fas fa-cloud-sun text-gray-300';
                if (code >= 51) return 'fas fa-umbrella text-blue-300';
                return 'fas fa-cloud text-gray-400';
            },
            loadAndMergeData() {
                this.isLoading = true;
                const tripRef = db.ref('trip_final_family_v46'); 
                tripRef.on('value', (snapshot) => {
                    const cloudData = snapshot.val();
                    if (cloudData) {
                        for(let i=0; i<this.days.length; i++) {
                            if(!cloudData[i]) cloudData[i] = [];
                            else cloudData[i].forEach(item => { if (!item.images) item.images = []; });
                        }
                        this.activities = cloudData;
                    } else {
                        this.activities = JSON.parse(JSON.stringify(masterDataVFinal));
                        this.saveToStorage();
                    }
                    this.isLoading = false;
                });
            },
            saveToStorage() { db.ref('trip_final_family_v46').set(this.activities); },
            async uploadImages(event, item) {
                const files = event.target.files;
                if (!files.length) return;
                this.isLoading = true; this.loadingText = "ä¸Šå‚³ä¸­...";
                if (!item.images) item.images = [];
                let completed = 0;
                for (let i = 0; i < files.length; i++) {
                    const file = files[i];
                    const filePath = `trip_photos_v46/${Date.now()}_${i}_${file.name.replace(/[^a-zA-Z0-9]/g,'_')}`;
                    try {
                        const snapshot = await storage.ref().child(filePath).put(file);
                        const url = await snapshot.ref.getDownloadURL();
                        item.images.push({ url, storagePath: filePath });
                    } catch(e){}
                    completed++;
                    this.progress = Math.round((completed / files.length) * 100);
                }
                this.saveToStorage(); this.isLoading = false; event.target.value = '';
            },
            deleteSingleImage(item, index) {
                if (!confirm("åˆªé™¤æ­¤ç…§ç‰‡ï¼Ÿ")) return;
                const img = item.images[index];
                if(img.storagePath) storage.ref().child(img.storagePath).delete();
                item.images.splice(index, 1);
                this.saveToStorage();
            },
            viewImage(url) { window.open(url, '_blank'); },
            generateGoogleLink(query, name, mode) {
                const q = encodeURIComponent(query || name);
                if (mode === 'walking') return `https://www.google.com/maps/search/?api=1&query=${q}`;
                return `https://www.google.com/maps/dir/?api=1&destination=${q}&travelmode=${mode || 'transit'}`;
            },
            changeDay(index) {
                this.currentDay = index; this.currentView = 'list'; this.showAllMap = false;
                const container = document.querySelector('.scroll-container');
                if(container) container.scrollTop = 0;
                if (this.mapInstance) this.$nextTick(() => { this.updateMapMarkers(); });
            },
            switchMap() {
                this.currentView = 'map'; this.showAllMap = true;
                this.$nextTick(() => { if (!this.mapInstance) this.initMap(); else { this.mapInstance.invalidateSize(); this.updateMapMarkers(); } });
            },
            toggleMapMode() { this.showAllMap = !this.showAllMap; this.updateMapMarkers(); },
            initMap() {
                this.mapInstance = L.map('map');
                L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', { attribution: 'Â© OpenStreetMap' }).addTo(this.mapInstance);
                this.markerGroup = L.layerGroup().addTo(this.mapInstance);
                this.updateMapMarkers();
            },
            updateMapMarkers() {
                if (!this.mapInstance || !this.markerGroup) return;
                this.markerGroup.clearLayers();
                let acts = this.showAllMap ? Object.values(this.activities).flat() : (this.activities[this.currentDay] || []);
                const bounds = [];
                acts.forEach(item => {
                    if(item.coords) {
                       L.circleMarker(item.coords, { color: '#3b82f6', radius: 8, fillOpacity: 0.8 }).addTo(this.markerGroup).bindPopup(item.location);
                       bounds.push(item.coords);
                    }
                    if(item.foodOptions) {
                        item.foodOptions.forEach(f => {
                            L.circleMarker(f.coords, { color: '#f97316', radius: 5, fillOpacity: 0.8 }).addTo(this.markerGroup).bindPopup(f.name);
                        });
                    }
                    if(item.shopOptions) {
                        item.shopOptions.forEach(s => {
                            L.circleMarker(s.coords, { color: '#ec4899', radius: 5, fillOpacity: 0.8 }).addTo(this.markerGroup).bindPopup(s.name);
                        });
                    }
                });
                if (bounds.length) this.mapInstance.fitBounds(bounds, { padding: [50, 50] });
            },
            checkPasscode() {
                if (this.passcode === this.correctPasscode) {
                    this.isAccessGranted = true;
                    localStorage.setItem('trip_unlocked', 'true');
                } else alert('å¯†ç¢¼éŒ¯èª¤ï¼');
            },
            openModal(item = null) {
                this.isEditing = !!item;
                this.form = item ? JSON.parse(JSON.stringify(item)) : { id: Date.now(), time: '09:00', location: '', action: '', coords: [], images: [], foodOptions: [], shopOptions: [], isUber: false };
                this.showModal = true;
            },
            saveActivity() {
                if (!this.form.location) return;
                if (!this.activities[this.currentDay]) this.activities[this.currentDay] = [];
                if (this.isEditing) {
                    const idx = this.activities[this.currentDay].findIndex(x => x.id === this.form.id);
                    if (idx !== -1) {
                         if(this.activities[this.currentDay][idx].images) this.form.images = this.activities[this.currentDay][idx].images;
                         if(this.activities[this.currentDay][idx].foodOptions) this.form.foodOptions = this.activities[this.currentDay][idx].foodOptions;
                         if(this.activities[this.currentDay][idx].shopOptions) this.form.shopOptions = this.activities[this.currentDay][idx].shopOptions;
                         if(this.activities[this.currentDay][idx].alert) this.form.alert = this.activities[this.currentDay][idx].alert;
                         this.activities[this.currentDay][idx] = this.form;
                    }
                } else this.activities[this.currentDay].push(this.form);
                this.saveToStorage(); this.showModal = false;
            },
            deleteActivity() {
                if(confirm('åˆªé™¤ï¼Ÿ')) {
                    this.activities[this.currentDay] = this.activities[this.currentDay].filter(x => x.id !== this.form.id);
                    this.saveToStorage(); this.showModal = false;
                }
            },
            resetData() {
                if(confirm('é‡ç½®è³‡æ–™ï¼Ÿ')) {
                    this.activities = JSON.parse(JSON.stringify(masterDataVFinal));
                    this.saveToStorage();
                    this.currentDay = 0;
                }
            },
            downloadMemories() { alert("æ—…ç¨‹çµæŸå¾Œå¯åœ¨æ­¤ä¸‹è¼‰å®Œæ•´å›æ†¶ç›¸ç°¿ï¼"); },
            
            // Touch Swipe Logic
            handleTouchStart(e) {
                this.touchStartX = e.changedTouches[0].screenX;
            },
            handleTouchEnd(e) {
                this.touchEndX = e.changedTouches[0].screenX;
                this.handleSwipe();
            },
            handleSwipe() {
                const threshold = 50; // Minimum distance for swipe
                if (this.touchEndX < this.touchStartX - threshold) {
                    // Swipe Left (Next Day)
                    if (this.currentDay < this.days.length - 1) {
                        this.changeDay(this.currentDay + 1);
                    }
                }
                if (this.touchEndX > this.touchStartX + threshold) {
                    // Swipe Right (Prev Day)
                    if (this.currentDay > 0) {
                        this.changeDay(this.currentDay - 1);
                    }
                }
            }
        }
    });
    app.mount('#app');
</script>
</body>
</html>
